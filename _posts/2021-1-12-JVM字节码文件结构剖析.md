---
title: JVM字节码文件结构剖析
date: 2021-1-12 14:31:26 +0800
categories: [JVM, 字节码文件]
tags: [字节码文件]
math: true
image: 
---

- 局部变量表在java代码编译的时候就确定了；

- 为什么在实例方法中可以使用"this"关键字来访问这个对象？

  因为在实例方法中，"this"为隐式入参，把当前对象参数传入方法中。可以通过javap -verbose反编译.class文件，在空的构造方法中的本地变量表中有"this"参数。

- 为什么java代码抛异常时，jvm知道是哪一句代码抛出了异常？

  因为在class文件中有维护一个叫LineNumberTab的行号表，里面维护了一条源码与指令码的映射信息。

- 常量池

  常量池里面保存了操作这个类所有需要的数据。是一种“池化”思想，可以节省空间。

  静态常量池：在java文件编译后产生

  运行时常量池：在程序运行时，静态常量池会被加载到运行时常量池里面。

  ~~~java
  String str = "A" + "B";
  /*运行时常量池
  str在编译时会被优化为"AB"一个字符串存放在静态常量池中
  */
  ~~~

- 一个类最多实现65535个接口，也就是16进制"FFFF"。

- 动态代理

- jclasslib插件，字节码文件查看插件。

- 方法中操作数栈深度编译时就能确定。javap -verbose *.class

- 字节码指令 助记符