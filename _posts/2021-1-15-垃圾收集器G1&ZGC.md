---
title: 垃圾收集器G1&ZGC
date: 2021-1-15 14:13:22 +0800
categories: [JVM, 垃圾收集器, G1&ZGC]
tags: [垃圾收集器, JVM, G1, ZGC]
math: true
image: 
---

JDK9 默认垃圾收集器G1，技术已经比较成熟。

### G1垃圾收集器(-XX:+UseG1GC)

Java堆在物理层面被分成一个个**Region**，每个Region还是有分代概念，最大2048个Region。

保留了年轻代和老年代的概念，但不再是物理隔阂了，它们是可以不连续的Region的集合。

默认年轻代占堆内存的5%

最大不能超过60%

Eden区与Survivor区比还是8:1:1

新增了Humongous区，G1垃圾收集器与之前唯一不同的是对大对象的处理方式，GC也会清理Humongous区

采用复制算法，但整体看是“标记-整理”算法，CMS采用标记-清除算法，复制算法没有内存碎片问题。

#### GC过程





#### 优先级列表

为了GC时间尽量符合最大停顿时间，优先选择回收价值最大的Region，比如一个Region存活对象有100个需要20ms回收，另一个Region存活的对象有10个需要10ms回收，G1会优先回收后一个Region，就是在最大停顿时间内尽量回收更多的内存空间。



### G1垃圾收集分类



#### YoungGC



#### MixedGC





#### Full GC



#### G1参数设置

- 



### 如何选择垃圾收集器





#### 每个GC阶段区别

