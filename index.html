<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
</head>
<body>
<p id="demo">点击这个按钮，获得您的位置：</p>
<button onclick="getLocation()">试一下</button>
<input id = "info" type = "text"></input>

<script>
//判断浏览器是否支持geolocation  
if(navigator.geolocation){  
     // getCurrentPosition支持三个参数  
     // getSuccess是执行成功的回调函数  
     // getError是失败的回调函数  
     // getOptions是一个对象，用于设置getCurrentPosition的参数  
     // 后两个不是必要参数 
	 var lat,lng;
     var getOptions = {  
          //是否使用高精度设备，如GPS。默认是true  
          enableHighAccuracy:true,  
          //超时时间，单位毫秒，默认为0  
          timeout:5000,  
          //使用设置时间内的缓存数据，单位毫秒  
          //默认为0，即始终请求新数据  
          //如设为Infinity，则始终使用缓存数据  
          maximumAge:0  
     };  
   
     //成功回调  
     function getSuccess(position){  
            
          console.log(position.timeStamp);     
		  lat = position.coords.latitude;
          lng = position.coords.longitude;
          console.log(position.coords.latitude);      
          
          console.log(position.coords.longitude);      
         
          console.log(position.coords.altitude);      
         
          console.log(position.coords.accuracy);      
         
          console.log(position.coords.altitudeAccuracy);      
         
          console.log(position.coords.heading);  
           
          console.log(position.coords.speed);      
          
          if(position.address){  
               
               console.log(position.address.country);  
               console.log(position.address.province);  
               console.log(position.address.city);  
          }  
     }  
     //失败回调  
     function getError(error){  
          // 执行失败的回调函数，会接受一个error对象作为参数  
          // error拥有一个code属性和三个常量属性TIMEOUT、PERMISSION_DENIED、POSITION_UNAVAILABLE  
          // 执行失败时，code属性会指向三个常量中的一个，从而指明错误原因  
			$("#info").val(error.code);
          switch(error.code){  
				
               case error.TIMEOUT: 
					console.log(error);
					console.log(error.code);
                    console.log('超时');  
                    break;  
               case error.PERMISSION_DENIED:  
                    console.log('用户拒绝提供地理位置');  
                    break;  
               case error.POSITION_UNAVAILABLE:  
                    console.log('地理位置不可用');  
                    break;  
               default:  
                    break;  
          }  
     }  
  
	function getLocation(){
	
		navigator.geolocation.getCurrentPosition(getSuccess, getError, getOptions); 
		
	 }
	 }
</script>
</body>
</html>
